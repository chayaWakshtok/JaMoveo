<div class="live-container">
  @if(loading && !currentSong){
  <div class="loading-container">
    <div class="loading-spinner">â³</div>
    <h2>×˜×•×¢×Ÿ ×©×™×¨...</h2>
    <p>×××ª×™×Ÿ ×œ×§×‘×œ×ª ×¤×¨×˜×™ ×”×©×™×¨</p>
  </div>
  }

  @if(error && !currentSong){
  <div class="error-container">
    <div class="error-icon">âŒ</div>
    <h2>{{ error }}</h2>
    <button class="refresh-button" (click)="refreshSong()">
      ğŸ”„ × ×¡×” ×©×•×‘
    </button>
  </div>
  }

  @if(currentSong&& !loading){
  <div class="song-header">
    <h1 class="song-title">{{ currentSong.name }}</h1>
    <h2 class="song-artist">{{ currentSong.artist }}</h2>
  </div>

  <div class="song-content">
    <!-- For singers - lyrics only -->
    @if(isSinger){
    <div class="lyrics-only">
      <h3>Lyrics</h3>
      <div class="lyrics-text">
        <!-- @for (line of formatLyrics(currentSong.lyrics); track $index) {
        <p class="lyrics-line">
          {{ line }}
        </p>
        } -->
      </div>
    </div>
    }
    @else {
    <div class="full-content">
      <div class="chords-section">
        <h3>Chords</h3>
        <div class="chords-text">
          <!-- @for (line of formatChords(currentSong.chords); track $index) {
          <p class="chord-line">
            {{ line }}
          </p>
          } -->

        </div>
      </div>

      <div class="lyrics-section">
        <h3>Lyrics</h3>
        <div class="lyrics-text">
          <!-- @for (line of formatLyrics(currentSong.lyrics); track $index) {
          <p class="lyrics-line">
            {{ line }}
          </p>
          } -->
        </div>
      </div>
    </div>
    }
  </div>

  <!-- Controls -->
  <div class="controls">
    <button class="scroll-toggle" (click)="toggleAutoScroll()" [class.active]="autoScroll">
      {{ autoScroll ? 'â¸ï¸ Stop Scroll' : 'â–¶ï¸ Auto Scroll' }}
    </button>

    @if(isAdmin){
    <button class="quit-button" (click)="quitSession()">
      Quit Session
    </button>
    }

  </div>

  }
  @else {
  <div class="no-song">
    <h2>No song selected yet</h2>
    <p>Waiting for the admin to select a song...</p>
    <button class="back-button" (click)="router.navigate(['/main'])">
      â† back main page
    </button>
  </div>
  }
</div>
